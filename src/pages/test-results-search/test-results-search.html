
<ion-header>
  <ion-navbar>
    <ion-title>Search tests</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>

  <tabs>
    <tab [tabTitle]="'Candidate details'">
      <ion-grid>
        <ion-row align-self-center>
          <ion-col class="component-label" col-22>
            <label>Search by</label>
          </ion-col>
          <ion-col col-34>
            <input type="radio"
              id="search-by-driver-number"
              class="gds-radio-button"
              name="searchBy"
              value="driverNumber"
              [checked]="searchBy === 'driverNumber'"
              (change)="searchByChanged($event.target.value)">
            <label for="search-by-driver-number" class="radio-label">Driver number</label>
          </ion-col>
          <ion-col col-40>
            <input type="radio"
              id="search-by-app-reference"
              class="gds-radio-button"
              name="searchBy"
              value="appReference"
              [checked]="searchBy === 'appReference'"
              (change)="searchByChanged($event.target.value)">
            <label for="search-by-app-reference" class="radio-label">Application reference</label>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col col-96>
            <input
              placeholder="Enter a driver number or application reference"
              type="text"
              id="candidate-info-input"
              class="candidate-info candidate-info-input"
              [class.ng-invalid]="invalid"
              [value]="candidateInfo"
              (change)="candidateInfoChanged($event.target.value)">
          </ion-col>
        </ion-row>
        <ion-row>
          <button [attr.disabled]="showSearchSpinner ? 'true' : null" class="mes-primary-button search-tests" ion-button (click)="searchTests()">
            <span class="search-tests-text">Search tests</span>
          </button>
          <ion-spinner class="search-spinner" name="bubbles" *ngIf="showSearchSpinner"></ion-spinner>
        </ion-row>
      </ion-grid>
    </tab>
    <tab [tabTitle]="'Advanced search'">
      <advanced-search></advanced-search>
    </tab>
  </tabs>

  <div class='results-error'>
    <p *ngIf="hasSearched && searchResults.length === 0" class="error-text">
      There were no results found
    </p>
    <p *ngIf="hasSearched && searchResults.length === 0" class="error-text">
      Please check and try again.
    </p>
  </div>

  <p *ngIf="searchResults.length > 0" class="results-message">
    Displaying {{searchResults.length}} results found
  </p>
  <search-result *ngFor="let result of searchResults" [searchResult]=result></search-result>

</ion-content>
