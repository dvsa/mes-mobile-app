<ion-header>
  <mes-header [title]="getTitle()"></mes-header>
</ion-header>

<ion-content padding class="mes-main-content">
  <form #form="ngForm" (ngSubmit)="gotoDL25(form)" novalidate (keydown.enter)="$event.preventDefault()">
    <ion-card class="mes-card">
      <ion-card-content>
        <div class="mes-header-md">Begin test</div>
        <ion-row>
          <ion-col col-4 class="mes-header-md">
            Eyesight test
          </ion-col>
          <ion-col col-4 class="mes-header-md center-text">
            Pass
            <input #isEyesightCompleted="ngModel" name="isEyesightCompleted" [(ngModel)]="preCheck.isEyesightCompleted" type="checkbox"
              required class="mes-checkbox">
          </ion-col>
          <ion-col offset-1 col-3 class="center-text">
            <button class="mes-header-md eyesight-record-serious-fault-button" (click)="showEyesightFaultRecordingModal()">
              <span>S</span>
              <div>
                <input class="checkbox" type="checkbox" [(ngModel)]="eyeSightSeriousFault" [ngModelOptions]="{standalone: true}">
              </div>
            </button>
          </ion-col>
        </ion-row>
        <p [hidden]="isEyesightCompleted.valid || (isEyesightCompleted.pristine && !form.submitted)" class="warning-text">
          Eyesight is required
        </p>
        <div class="mes-divider"></div>
        <ion-row>
          <ion-col col-4 class="mes-header-md">
            Tell me question
          </ion-col>
          <ion-col col-4>
            <select-button required #tellMeQuestion="ngModel" [(ngModel)]="preCheck.tellMeQuestionId" name="tellMeQuestionId" [onClickEventHandler]="showTellMeOptions"
              [selectedText]="preCheck.tellMeQuestionId"></select-button>
          </ion-col>
          <ion-col col-4 [ngClass]="{'btns-disabled': !preCheck.tellMeQuestionId }">
            <div class="fault-btn driverFault-btn" [ngClass]="{'active': (vcState$ | async)?.fault}" (click)="setTellMeState('fault', $event)">D/F</div>
            <div class="fault-btn serious-btn" [ngClass]="{'active': (vcState$ | async)?.serious}" (click)="setTellMeState('serious', $event)">S</div>
            <div class="fault-btn dangerous-btn" [ngClass]="{'active': (vcState$ | async)?.dangerous}" (click)="setTellMeState('dangerous', $event)">D</div>
          </ion-col>
        </ion-row>
        <p [hidden]="tellMeQuestion.valid || (tellMeQuestion.pristine && !form.submitted)" class="warning-text">
          Select Tell me question
        </p>
        <div class="mes-divider"></div>
        <ion-row class="height-auto">
          <ion-col col-4 class="mes-header-md">
            Accompanied by (optional)
          </ion-col>
          <ion-col class="mes-header-md">
            ADI
            <input type="checkbox" class="mes-checkbox">
          </ion-col>
          <ion-col class="mes-header-md">
            Sup
            <input type="checkbox" class="mes-checkbox">
          </ion-col>
          <ion-col class="mes-header-md">
            Other
            <input type="checkbox" class="mes-checkbox">
          </ion-col>
        </ion-row>
        <div class="mes-divider"></div>
        <ion-row>
          <ion-col col-4 class="mes-header-md">
            Registration number
          </ion-col>
          <ion-col col-8>
            <input appInputRestriction="noSpecialChars" required type="text" class="mes-text-input capital-characters" #carRegistration="ngModel"
              name="carRegistration" [(ngModel)]="preCheck.carRegistration" autocapitalize="characters">
          </ion-col>
        </ion-row>
        <p [hidden]="carRegistration.valid || (carRegistration.pristine && !form.submitted)" class="warning-text">
          Car registration number is required
        </p>
        <div class="mes-divider"></div>
        <ion-row class="height-auto">
          <ion-col col-4 class="mes-header-md">
            Category
            <input type="checkbox" hidden required #isAutomatic="ngModel" name="isAutomatic" [(ngModel)]="preCheck.isAutomatic">
          </ion-col>
          <ion-col col-4 class="mes-header-md">
            Manual
            <input #yesInput type="checkbox" class="mes-checkbox" (change)="automaticInputChanged($event, noInput);">
          </ion-col>
          <ion-col col-4 class="mes-header-md">
            Automatic
            <input #noInput type="checkbox" class="mes-checkbox" (change)="automaticInputChanged($event, yesInput);">
          </ion-col>
        </ion-row>
        <p [hidden]="isAutomatic.valid || (isAutomatic.pristine && !form.submitted)" class="warning-text">
          One option must be selected
        </p>
        <div class="mes-divider"></div>
        <ion-row class="center-text">
          <ion-col col-4 class="mes-header-md">
            Vehicle details (optional)
          </ion-col>
          <ion-col col-3 class="mes-header-md">
            School car
            <input type="checkbox" class="mes-checkbox">
          </ion-col>
          <ion-col col-3 class="mes-header-md">
            D/C
            <input type="checkbox" class="mes-checkbox">
          </ion-col>
        </ion-row>
        <div class="mes-divider"></div>
        <ion-row>
          <ion-col col-4 class="mes-header-md">
            Instructor registration number (optional)
          </ion-col>
          <ion-col col-8>
            <input appInputRestriction="integer" type="number" pattern="[0-9]*" class="mes-text-input">
          </ion-col>
        </ion-row>
        <div class="mes-divider"></div>
        <ion-row>
          <ion-col col-4 class="mes-header-md">
            Instructor certification number (optional)
          </ion-col>
          <ion-col col-8>
            <input appInputRestriction="integer" type="number" pattern="[0-9]*" class="mes-text-input">
          </ion-col>
        </ion-row>
      </ion-card-content>
    </ion-card>
    <ion-row justify-content-between padding-left padding-right>
      <button class="mes-cta-button-secondary" [navPush]="endTestReasonPage">End driving test</button>
      <button class="mes-cta-button-primary" type="submit">Confirm and continue</button>
    </ion-row>
  </form>
</ion-content>
