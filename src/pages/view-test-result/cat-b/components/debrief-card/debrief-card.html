<ion-card>
  <ion-card-header>
    <h4>Debrief</h4>
  </ion-card-header>
  <ion-card-content>
    <ion-grid>
      <data-row-with-list [label]="'Test Requirements'" [data]="getTestRequirements()"></data-row-with-list>
      <data-row [label]="'Manoeuvre(s)'" [value]="getFlattenArray(data.manoeuvres)"></data-row>
      <data-row-with-list [label]="'Controlled Stop'" [data]="getControlledStop()"></data-row-with-list>
      <data-row-with-list [label]="'ECO'" [data]="getEco()"></data-row-with-list>

      <data-row-custom [label]="'Fault descriptions'">
        <span class="mes-data" *ngIf="showNoFaultsMessage()"> No faults recorded</span>
        <ion-grid>
          <ion-row *ngIf="data.dangerousFaults.length !== 0">
            <ion-col><span class='mes-data bold'>{{data.dangerousFaults.length}} dangerous faults</span></ion-col>
          </ion-row>
          <ion-row *ngFor="let dangerousFault of data.dangerousFaults">
            <ion-col col-7>
              <div class="badge-container">
                <dangerous-fault-badge [showBadge]="true"></dangerous-fault-badge>
              </div>
            </ion-col>
            <ion-col>
              <ion-row>
                <ion-col>
                  <span class="mes-data">{{dangerousFault.competencyDisplayName}}</span>
                </ion-col>
              </ion-row>
              <ion-row *ngIf="dangerousFault.comment">
                <ion-col>
                  <span class="mes-data">- {{dangerousFault.comment}}</span>
                </ion-col>
              </ion-row>
            </ion-col>
          </ion-row>
          <ion-row *ngIf="data.seriousFaults.length !== 0">
            <ion-col><span class='mes-data bold'>{{data.seriousFaults.length}} serious faults</span></ion-col>
          </ion-row>
          <ion-row *ngFor="let seriousFault of data.seriousFaults">
            <ion-col col-7>
              <div class="badge-container">
                <serious-fault-badge [showBadge]="true"></serious-fault-badge>
              </div>
            </ion-col>
            <ion-col>
              <ion-row>
                <ion-col>
                  <span class="mes-data">{{seriousFault.competencyDisplayName}}</span>
                </ion-col>
              </ion-row>
              <ion-row *ngIf="seriousFault.comment">
                <ion-col>
                  <span class="mes-data">- {{seriousFault.comment}}</span>
                </ion-col>
              </ion-row>
            </ion-col>
          </ion-row>
          <ion-row *ngIf="data.drivingFaultCount !== 0">
            <ion-col><span class='mes-data bold'>{{data.drivingFaultCount}} driving faults</span></ion-col>
          </ion-row>
          <ion-row *ngFor="let drivingFault of data.drivingFaults">
            <ion-col col-7>
              <div class="badge-container">
                <driving-faults-badge [count]='drivingFault.faultCount'></driving-faults-badge>
              </div>
            </ion-col>
            <ion-col>
              <ion-row>
                <ion-col>
                  <span class="mes-data">{{drivingFault.competencyDisplayName}}</span>
                </ion-col>
              </ion-row>
              <ion-row *ngIf="data.drivingFaultCount > 15 && drivingFault.comment">
                <ion-col>
                  <span class="mes-data">- {{drivingFault.comment}}</span>
                </ion-col>
              </ion-row>
            </ion-col>
          </ion-row>
        </ion-grid>
      </data-row-custom>
      <data-row [label]="'ETA'" [value]="getFlattenArray(data.eta)"></data-row>
      <data-row-custom [label]="'Tell me question(s)'">
        <span class="mes-data" *ngIf="!data.tellMeQuestion">None</span>
        <span class="mes-data" *ngIf="data.tellMeQuestion">
          <span class="mes-data bold">{{data.tellMeQuestion.code}}</span> - {{data.tellMeQuestion.shortName}}</span>
      </data-row-custom>
      <data-row-custom [label]="'Show me question(s)'" [shouldHaveSeperator]="false">
        <span class="mes-data" *ngIf="!data.showMeQuestion">None</span>
        <span class="mes-data" *ngIf="data.showMeQuestion">
          <span class="mes-data bold">{{data.showMeQuestion.code}}</span> - {{data.showMeQuestion.shortName}}</span>
      </data-row-custom>
    </ion-grid>
  </ion-card-content>
</ion-card>
