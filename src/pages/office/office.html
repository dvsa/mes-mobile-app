<ion-header>
  <ion-navbar hideBackButton>
    <ion-title>Office</ion-title>
    <ion-buttons end>
      <button ion-button (click)="logout()">Logout</button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content>
        <ion-row class="mes-full-width-card" id="candidate-section">
            <ion-col col-32><h2 id="candidate-name">{{pageState.candidateName$ | async}}</h2><h3  id="candidate-driver-number">{{pageState.candidateDriverNumber$ | async}}</h3></ion-col>
            <ion-col></ion-col>
            <ion-col col-auto style="float:right; text-align:right"><h2>{{pageState.startTime$ | async}}</h2><h3>test outcome: <span class="mes-red">Unsuccessful</span></h3></ion-col>
        </ion-row>
  
<ion-card>
    <ion-card-header>
      <h4>Test Summary</h4>
    </ion-card-header>

    
<ion-card-content class="card-content-ios" no-bounce>
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <ion-grid class="grid">
        <ion-row class="mes-validated-row mes-row-separator" id="route-number-card">
          <div class="validation-bar" [class.ng-invalid]="isCtrlDirtyAndInvalid('routeNumberCtrl')"></div>
          <ion-col class="component-label" col-32 align-self-center>
            <label>Route number</label>
          </ion-col>
          <ion-col align-self-center>
            <ion-row class="spacing-row"></ion-row>
            <ion-row>
              <ion-col col-32>
                <input #routeInput type="text" id="route" formControlName="routeNumberCtrl"
                  class="vehicle-reg-input" numberonly
                  [class.ng-invalid]="isCtrlDirtyAndInvalid('routeNumberCtrl')"
                  [value]="pageState.routeNumber$ | async">
              </ion-col>
            </ion-row>
            <ion-row class="validation-message-row" align-items-center>
              <div class="validation-text" [class.ng-invalid]="isCtrlDirtyAndInvalid('routeNumberCtrl')">
                Enter the route number
              </div>
            </ion-row>
          </ion-col>
        </ion-row>

        <ion-row class="mes-validated-row mes-row-separator" id="independent-driving-card">
            <div class="validation-bar" [class.ng-invalid]="isCtrlDirtyAndInvalid('independentDrivingCtrl')">
            </div>
            <ion-col class="component-label" col-32 align-self-center>
              <label>Independent driving</label>
            </ion-col>
            <ion-col align-self-center>
              <ion-row class="spacing-row"></ion-row>
              <ion-row>
                <ion-col col-32>
                  <input type="radio" formControlName="independentDrivingCtrl" name="independentDrivingCtrl"
                    id="independent-driving-satnav" class="gds-radio-button"
                    [class.ng-invalid]="isCtrlDirtyAndInvalid('independentDrivingCtrl')" (click)="satNavUsed()"
                    [checked]="pageState.independentDrivingSatNavRadioChecked$ | async" value='Sat nav'>
                  <label for="independent-driving-satnav" class="radio-label">Sat Nav</label>
                </ion-col>
                <ion-col col-32>
                  <input type="radio" formControlName="independentDrivingCtrl" name="independentDrivingCtrl"
                    id="independent-driving-trafficsigns" class="gds-radio-button"
                    [class.ng-invalid]="isCtrlDirtyAndInvalid('independentDrivingCtrl')" (click)="trafficSignsUsed()"
                    [checked]="pageState.independentDrivingTrafficSignsRadioChecked$ | async" value='Traffic signs'>
                  <label for="independent-driving-trafficsigns" class="radio-label">Traffic signs</label>
                </ion-col>
              </ion-row>
              <ion-row class="validation-message-row" align-items-center>
                <div class="validation-text" [class.ng-invalid]="isCtrlDirtyAndInvalid('independentDrivingCtrl')">
                  Select independent driving method tested
                </div>
              </ion-row>
            </ion-col>
          </ion-row>
  
        <ion-row class="mes-validated-row mes-row-separator" id="candidate-description-card">
          <div class="validation-bar" [class.ng-invalid]="isCtrlDirtyAndInvalid('candidateDescriptionCtrl')"></div>
          <ion-col class="component-label" col-32 align-self-center>
            <label>Physical description of the candidate</label>
          </ion-col>
          <ion-col align-self-center>
            <ion-row class="spacing-row"></ion-row>
            <ion-row>
              <ion-col col-64>
                <textarea #candidateDescriptionInput id="physical-description" formControlName="candidateDescriptionCtrl"
                  class="vehicle-reg-input"
                  [class.ng-invalid]="isCtrlDirtyAndInvalid('candidateDescriptionCtrl')"
                  [value]="pageState.candidateDescription$ | async">
                </textarea>
              </ion-col>
            </ion-row>
            <ion-row class="validation-message-row" align-items-center>
              <div class="validation-text" [class.ng-invalid]="isCtrlDirtyAndInvalid('candidateDescriptionCtrl')">
                Enter the physical description of the candidate
              </div>
            </ion-row>
          </ion-col>
        </ion-row>

        <ion-row class="mes-validated-row mes-row-separator" id="debrief-card">
          <div class="validation-bar" [class.ng-invalid]="isCtrlDirtyAndInvalid('debriefWitnessedCtrl')">
          </div>
          <ion-col class="component-label" col-32 align-self-center>
            <label>Debrief witnessed?</label>
          </ion-col>
          <ion-col align-self-center>
            <ion-row class="spacing-row"></ion-row>
            <ion-row>
              <ion-col col-32>
                <input type="radio" formControlName="debriefWitnessedCtrl" name="debriefWitnessedCtrl"
                  id="debrief-witnessed-yes" class="gds-radio-button"
                  [class.ng-invalid]="isCtrlDirtyAndInvalid('debriefWitnessedCtrl')" (click)="debriefWitnessed()"
                  [checked]="pageState.debriefWitnessedYesRadioChecked$ | async" value='Yes'>
                <label for="debrief-witnessed-yes" class="radio-label">Yes</label>
              </ion-col>
              <ion-col col-32>
                <input type="radio" formControlName="debriefWitnessedCtrl" name="debriefWitnessedCtrl"
                  id="debrief-witnessed-no" class="gds-radio-button"
                  [class.ng-invalid]="isCtrlDirtyAndInvalid('debriefWitnessedCtrl')" (click)="debriefUnwitnessed()"
                  [checked]="pageState.debriefWitnessedNoRadioChecked$ | async" value='No'>
                <label for="debrief-witnessed-no" class="radio-label">No</label>
              </ion-col>
            </ion-row>
            <ion-row class="validation-message-row" align-items-center>
              <div class="validation-text" [class.ng-invalid]="isCtrlDirtyAndInvalid('debriefWitnessedCtrl')">
                Select whether the debrief was witnessed
              </div>
            </ion-row>
          </ion-col>
        </ion-row>

        <ion-row class="mes-validated-row mes-row-separator" id="identification-card">
          <div class="validation-bar" [class.ng-invalid]="isCtrlDirtyAndInvalid('identificationCtrl')">
          </div>
          <ion-col class="component-label" col-32 align-self-center>
            <label>Identification</label>
          </ion-col>
          <ion-col align-self-center>
            <ion-row class="spacing-row"></ion-row>
            <ion-row>
              <ion-col col-32>
                <input type="radio" formControlName="identificationCtrl" name="identificationCtrl"
                  id="identification-license" class="gds-radio-button"
                  [class.ng-invalid]="isCtrlDirtyAndInvalid('identificationCtrl')" (click)="identificationLicence()"
                  [checked]="pageState.identificationLicenseRadioChecked$ | async" value='Licence'>
                <label for="identification-license" class="radio-label">Yes</label>
              </ion-col>
              <ion-col col-32>
                <input type="radio" formControlName="identificationCtrl" name="identificationCtrl"
                  id="identification-passport" class="gds-radio-button"
                  [class.ng-invalid]="isCtrlDirtyAndInvalid('identificationCtrl')" (click)="identificationPassport()"
                  [checked]="pageState.identificationPassportRadioChecked$ | async" value='Passport'>
                <label for="identification-passport" class="radio-label">Passport</label>
              </ion-col>
            </ion-row>
            <ion-row class="validation-message-row" align-items-center>
              <div class="validation-text" [class.ng-invalid]="isCtrlDirtyAndInvalid('identificationCtrl')">
                Select the form of identification used
              </div>
            </ion-row>
          </ion-col>
        </ion-row>

        <!-- TODO this may just be a text output not an input so change this row to remove validation etc -->
        <ion-row class="mes-validated-row mes-row-separator" id="tell-me-question-card">
          <div class="validation-bar" [class.ng-invalid]="isCtrlDirtyAndInvalid('tellMeQuestionCtrl')"></div>
          <ion-col class="component-label" col-32 align-self-center>
            <label>Tell me question</label>
          </ion-col>
          <ion-col align-self-center>
            <ion-row class="spacing-row"></ion-row>
            <ion-row>
              <ion-col col-32>
                <!-- TODO pull question in from state -->
                T14 - Brake fluid
              </ion-col>
            </ion-row>
            <ion-row class="validation-message-row" align-items-center>
              <div class="validation-text" [class.ng-invalid]="isCtrlDirtyAndInvalid('tellMeQuestionCtrl')">
                Enter the tell me question
              </div>
            </ion-row>
          </ion-col>
        </ion-row>

        <ion-row class="mes-validated-row mes-row-separator" id="d255-card">
          <div class="validation-bar" [class.ng-invalid]="isCtrlDirtyAndInvalid('d255Ctrl')">
          </div>
          <ion-col class="component-label" col-32 align-self-center>
            <label>D255?</label>
          </ion-col>
          <ion-col align-self-center>
            <ion-row class="spacing-row"></ion-row>
            <ion-row>
              <ion-col col-32>
                <input type="radio" formControlName="d255Ctrl" name="d255Ctrl" id="d255-yes" class="gds-radio-button"
                  [class.ng-invalid]="isCtrlDirtyAndInvalid('d255Ctrl')" (click)="d255Yes()"
                  [checked]="pageState.d255YesRadioChecked$ | async" value='Yes'>
                <label for="d255-yes" class="radio-label">Yes</label>
              </ion-col>
              <ion-col col-32>
                <input type="radio" formControlName="d255Ctrl" name="d255Ctrl" id="d255-no" class="gds-radio-button"
                  [class.ng-invalid]="isCtrlDirtyAndInvalid('d255Ctrl')" (click)="d255No()"
                  [checked]="pageState.d255NoRadioChecked$ | async" value='No'>
                <label for="d255-no" class="radio-label">No</label>
              </ion-col>
            </ion-row>
            <ion-row class="validation-message-row" align-items-center>
              <div class="validation-text" [class.ng-invalid]="isCtrlDirtyAndInvalid('d255Ctrl')">
                Select D255
              </div>
            </ion-row>
          </ion-col>
        </ion-row>

        <ion-row class="mes-component-row mes-row-separator" id="additional-information-card">
          <ion-col class="component-label" col-32 align-self-center>
            <label>Additional information (optional)</label>
          </ion-col>
          <ion-col align-self-center>
            <ion-row class="spacing-row"></ion-row>
            <ion-row>
              <ion-col col-32>
                <textarea #additionalInformationInput  id="additional-information"
                  [value]="pageState.additionalInformation$ | async">
                </textarea>
              </ion-col>
            </ion-row>
            <ion-row class="spacing-row"></ion-row>
          </ion-col>
        </ion-row>
      </ion-grid>
    </form>
</ion-card-content>
</ion-card>
</ion-content>
<ion-footer>
  <ion-row class="mes-full-width-card">
    <ion-col col-12>
      <span>Save and continue later</span>
    </ion-col>
    <ion-col col-72></ion-col>
    <ion-col col-12>
      <button type="submit" class="mes-primary-button" ion-button>
        <h3>Submit</h3>
      </button>
    </ion-col>
  </ion-row>
</ion-footer>
